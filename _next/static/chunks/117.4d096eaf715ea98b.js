"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[117],{6117:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var a=n(5893),s=n(4605),o=n(7294),l=n(3977),i=n(9883);let c={apiKey:"AIzaSyAkfHBzGYQcUZL0S76E3TukmzFuzCidge4",authDomain:"koolyard-84a4a.firebaseapp.com",projectId:"koolyard-84a4a",storageBucket:"koolyard-84a4a.appspot.com",messagingSenderId:"669707854180",appId:"1:669707854180:web:8a5e8aa2dd09025df95a71",measurementId:"G-PG9PCKGMHY"},r={init:async function(){try{let e=0===(0,l.C6)().length?(0,l.ZF)(c):(0,l.C6)()[0],t=(0,i.KL)(e),n=await Notification.requestPermission();if(n&&"granted"===n){let e=await s.tO.getItem("fcm_token");if(e)return e;let n=await (0,i.LP)(t,{vapidKey:"BKsc3xU_8UlCKISztvYhJHM94W0aJfqVB2DqSgXUCkKAf42PT-t4UGBam2UbT7xTLojKwagmZncErhko2TTz49c"});if(n)return await s.tO.setItem("fcm_token",n),n;console.log("No registration token available. Request permission to generate one.")}else console.log("Please grant notification permission!")}catch(e){return console.log("An error occurred while retrieving token. ",e),null}}};var d=n(1664),u=n.n(d),m=n(5445),f=function(){let{noties:e,setNoti:t,addNoti:n}=(0,s.sK)(e=>({noties:e.noties,setNoti:e.setNoti,addNoti:e.addNoti})),[l,c]=(0,o.useState)(0),d=(0,o.useRef)();(0,o.useEffect)(()=>{(async function(){try{let e=await r.init();console.log("Fcm token",e)}catch(e){console.log(e)}})(),function(e){let t=(0,i.KL)();(0,i.ps)(t,t=>{e(t)})}(e=>n(e))},[]),(0,o.useEffect)(()=>{let t=e&&e.filter(e=>!e.isSeen).length;c(t)},[e]);let f=(0,o.useCallback)(()=>{let n=e.map(e=>({...e,isSeen:!0}));t(n)},[e]),h=(0,o.useCallback)(()=>{d.current.removeAttribute("open")},[e]);return(0,a.jsx)("div",{className:"flex items-center justify-center w-12 h-12",children:(0,a.jsxs)("details",{className:"z-50 h-6 dropdown dropdown-end",ref:d,children:[(0,a.jsxs)("summary",{tabIndex:"1",onClick:f,className:"relative indicator h-full inline-flex items-center cursor-pointer",children:[l>0&&(0,a.jsx)("span",{className:"indicator-item badge badge-sm px-1 badge-secondary",children:l<99?l:"99+"}),(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})]}),(0,a.jsxs)("ul",{tabIndex:"0",className:"z-50 dropdown-content menu font-normal shadow-2xl bg-base-300 rounded-xl w-96",children:[(0,a.jsx)("li",{className:"font-bold border-b border-neutral-focus",children:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Notifications"}),(0,a.jsx)("span",{children:(0,a.jsxs)("svg",{className:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})}),e&&0===e.length?(0,a.jsx)("li",{className:"text-center p-4",children:"No notification"}):e.map((e,t)=>(0,a.jsx)("li",{children:(0,a.jsxs)(u(),{href:e.link,onClick:h,className:"flex items-center text-left",children:[(0,a.jsx)(m.Z,{className:"w-12 h-12",img:e.img,alt:"noty-".concat(t)}),(0,a.jsx)("div",{className:"flex-1",children:e.body}),!e.isSeen&&(0,a.jsx)("span",{className:"rounded-full bg-accent p-1"})]})},"noty-".concat(t)))]})]})})}}}]);