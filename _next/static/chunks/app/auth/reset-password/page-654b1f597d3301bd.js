(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2048],{4204:function(e,s,t){Promise.resolve().then(t.bind(t,1410))},1410:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var r=t(7437),a=t(7217),n=t(6457),o=t(4033),i=t(1865),l=t(2265);function d(){let e=(0,o.useRouter)(),s=(0,o.useSearchParams)(),t=s.get("email"),[d,c]=(0,l.useState)(""),{register:u,handleSubmit:m,formState:{errors:h},watch:f}=(0,i.cI)(),p=(0,l.useRef)({});p.current=f("password","");let x=async s=>{console.log(s);let r=await (0,a.Z)("".concat(n.bl,"/api/v1/users/forgot-password"),"PUT",{email:t,token:s.token,new_password:s.password,retype_new_password:s.repeatPassword});r&&r.status?e.push("/auth/login"):c(r.message||r.error)};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("form",{onSubmit:m(x),className:"max-w-xl bg-base-100 mx-auto mt-12 rounded-lg overflow-hidden p-12 sm:py-20 sm:px-24 space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-center",children:"Reset password"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"form-input",children:[(0,r.jsx)("input",{...u("email"),type:"text",placeholder:" ",value:t,disabled:!0}),(0,r.jsx)("label",{for:"email",children:"Email"})]}),h.email&&(0,r.jsx)("div",{className:"text-error",children:h.email.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"form-input",children:[(0,r.jsx)("input",{...u("token",{required:"This field is required"}),type:"text",placeholder:" "}),(0,r.jsx)("label",{for:"token",children:"Passcode"})]}),h.token&&(0,r.jsx)("div",{className:"text-error",children:h.token.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"form-input",children:[(0,r.jsx)("input",{...u("password",{required:"You must specify a password",minLength:{value:8,message:"Password must have at least 8 characters"}}),type:"password",placeholder:" "}),(0,r.jsx)("label",{for:"password",children:"Password"})]}),h.password&&(0,r.jsx)("div",{className:"text-error",children:h.password.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"form-input",children:[(0,r.jsx)("input",{...u("repeatPassword",{required:"This field is required",validate:e=>e===p.current||"The passwords do not match"}),type:"password",placeholder:" "}),(0,r.jsx)("label",{for:"repeat-password",children:"Repeat password"})]}),h.repeatPassword&&(0,r.jsx)("div",{className:"text-error",children:h.repeatPassword.message})]}),(0,r.jsx)("button",{className:"btn btn-primary w-full",children:"Register"}),d&&(0,r.jsx)("div",{className:"text-error",children:d})]})})}},5039:function(e,s,t){"use strict";var r=t(5484);s.Z={getItem:async e=>(0,r.U2)(e).then(e=>e).catch(e=>{}),setItem:async(e,s)=>{await (0,r.t8)(e,s)},removeItem:async e=>{await (0,r.IV)(e)}}},6457:function(e,s,t){"use strict";t.d(s,{Cx:function(){return r},DN:function(){return a},MI:function(){return c},Pm:function(){return o},bl:function(){return n},dr:function(){return l},hp:function(){return i},nj:function(){return d}});let r="AfBMQbX0e68dTTyZbmn8oC9UL5zPdZAaf4XwU1mR",a="G0sBIyaqex7g67FSDIFyJqeBdxyo8Msg4fUxnqeAAX22xwH6KMeVLQwJRox34HJvMxdV1PPyxMBdnFBPk7DD3IByCJtL6MhOojcCJSDWGIC5OqFm0AlhcsA7fTIeDqsP",n="https://api-dev.koolyard.com",o=10,i=5,l=5,d=5,c=[{label:"Newest channel",field:"created"},{label:"Oldest channel",field:"-created"},{label:"Most members",field:"members"},{label:"Fewest members",field:"-members"},{label:"A to Z",field:"name"},{label:"Z to A",field:"-name"}]},7217:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var r=t(5039);async function a(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n={method:s?String(s||"").toUpperCase():"GET"};"GET"!==n.method&&(t.files?n.body=t.files:n.body=JSON.stringify(t||{})),n.headers={"Content-Type":"application/json",...a},t.files&&delete n.headers["Content-Type"];let o=await r.Z.getItem("forumUser");if(o){var i;let e=JSON.parse(o),s=null==e?void 0:null===(i=e.state)||void 0===i?void 0:i.access;s&&(n.headers.Authorization="Bearer ".concat(s))}return fetch(e,n).then(e=>(403===e.status?window&&(window.location.href="/error/403/"):404===e.status?window&&(window.location.href="/error/404/"):401===e.status&&r.Z.removeItem("forumUser"),e.json()))}}},function(e){e.O(0,[4338,2971,596,1744],function(){return e(e.s=4204)}),_N_E=e.O()}]);