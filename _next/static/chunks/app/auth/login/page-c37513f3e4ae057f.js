(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6716],{4521:function(e,t,o){Promise.resolve().then(o.bind(o,9074))},9074:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return v}});var n=o(7437);function s(e){this.message=e}s.prototype=Error(),s.prototype.name="InvalidCharacterError";var r="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new s("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,n,r=0,i=0,a="";n=t.charAt(i++);~n&&(o=r%4?64*o+n:n,r++%4)&&(a+=String.fromCharCode(255&o>>(-2*r&6))))n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return a};function i(e){this.message=e}i.prototype=Error(),i.prototype.name="InvalidTokenError";var a=function(e,t){if("string"!=typeof e)throw new i("Invalid token specified");var o=!0===(t=t||{}).header?0:1;try{return JSON.parse(function(e){var t,o=e.replace(/-/g,"+").replace(/_/g,"/");switch(o.length%4){case 0:break;case 2:o+="==";break;case 3:o+="=";break;default:throw"Illegal base64url string!"}try{return t=o,decodeURIComponent(r(t).replace(/(.)/g,function(e,t){var o=t.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}catch(e){return r(o)}}(e.split(".")[o]))}catch(e){throw new i("Invalid token specified: "+e.message)}},l=o(1396),c=o.n(l),d=o(7217),u=o(4033),p=o(1865),h=o(9279),f=o(2265),m=o(6457);function v(){let e=(0,u.useRouter)(),{access:t,setAccess:o,setRefresh:s,setProfile:r}=(0,h.LM)(),[i,l]=(0,f.useState)("");(0,f.useEffect)(()=>{if(t)return e.push("/forum")},[t]);let{register:v,handleSubmit:g,formState:{errors:b}}=(0,p.cI)(),w=async e=>{let t=await (0,d.Z)("".concat(m.bl,"/oauth2/token/"),"POST",{email:e.email,password:e.password,grant_type:e.password?"password":"refresh_token",client_id:m.Cx,client_secret:m.DN});if(t&&!t.error){o(t.access_token),s(t.refresh_token);let e=await (0,d.Z)("".concat(m.bl,"/api/v1/userprofile/me"),"GET");if(e.status){var n;let o=(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.profile)||{},s=a(t.access_token);r({...o,school_id:s.school_id,school_roles:s.school_roles})}}else l(t.error_description||t.error)};return(0,n.jsxs)("form",{onSubmit:g(w),className:"max-w-xl bg-base-100 mx-auto mt-12 rounded-lg overflow-hidden p-12 sm:py-20 sm:px-24 space-y-6",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-center",children:"Weâ€™ve missed you!"}),(0,n.jsx)("p",{className:"text-lg",children:"More than 150 questions are waiting for your wise suggestions!"}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"form-input",children:[(0,n.jsx)("input",{...v("email",{required:"This field is required"}),type:"text",placeholder:" "}),(0,n.jsx)("label",{htmlFor:"email",children:"Username"})]}),b.email&&(0,n.jsx)("div",{className:"text-error",children:b.email.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"form-input",children:[(0,n.jsx)("input",{...v("password",{required:"This field is required"}),type:"password",placeholder:" "}),(0,n.jsx)("label",{htmlFor:"password",children:"Password"})]}),b.password&&(0,n.jsx)("div",{className:"text-error",children:b.password.message})]}),(0,n.jsx)("button",{className:"btn btn-primary w-full",children:"Login"}),i&&(0,n.jsx)("div",{className:"text-error",children:i}),(0,n.jsx)(c(),{className:"link link-hover block",href:"/auth/forgot-password",children:"Forgot password?"})]})}},4016:function(e,t,o){"use strict";var n=o(6457),s=o(7217),r=o(713);t.Z={ListPinPostForSchool:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t=arguments.length>1?arguments[1]:void 0,o="".concat(n.bl,"/api/v1/posts-pinned?limit=").concat(e,"&offset=").concat(t),{data:i,isLoading:a}=(0,r.ZP)(o,s.Z);return{pin_posts:null==i?void 0:i.data,isLoadingPinPost:a,isErrorPinPost:(null==i?void 0:i.status)===!1&&(null==i?void 0:i.message)}},SearchPostSchool:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,i="".concat(n.bl,"/api/v1/posts/search?limit=").concat(e,"&offset=").concat(t,"&q=").concat(o),{data:a,isLoading:l}=(0,r.ZP)(i,s.Z);return{posts:a,isLoading:l,isError:(null==a?void 0:a.status)===!1&&(null==a?void 0:a.message)}},GetDetailPost:e=>{let t="".concat(n.bl,"/api/v1/posts/").concat(e),{data:o,isLoading:i}=(0,r.ZP)(t,s.Z);return{detail_post:o,isLoading:i,isError:(null==o?void 0:o.status)===!1&&(null==o?void 0:o.message)}},ListCommentPost:(e,t,o)=>{let i="".concat(n.bl,"/api/v1/posts/").concat(e,"/comments?limit=").concat(t,"&offset=").concat(o),{data:a,isLoading:l}=(0,r.ZP)(i,s.Z);return{comments_post:a,isLoading:l,isError:(null==a?void 0:a.status)===!1&&(null==a?void 0:a.message)}},CreatePostSchool:(e,t,o)=>{let r="".concat(n.bl,"/api/v1/posts");return(0,s.Z)(r,"POST",{subject:e,content:t,tags:o})},UploadImagePost:(e,t,o)=>{let r="".concat(n.bl,"/api/v1/posts/").concat(e,"/images");return(0,s.Z)(r,"POST",{image:t,caption:o})},CreateLocationPost:(e,t,o,r,i)=>{let a="".concat(n.bl,"/api/v1/post/").concat(e,"/location");return(0,s.Z)(a,"PUT",{primary_street_name:t,secondary_street_name:o,primary_location:r,secondary_location:i})},PinPostSchool:e=>{let t="".concat(n.bl,"/api/v1/posts/pinned/").concat(e);return(0,s.Z)(t,"PUT")},LikePost:e=>{let t="".concat(n.bl,"/api/v1/posts/").concat(e,"/");return(0,s.Z)(t,"PUT")},RemovePinPostSchool:e=>{let t="".concat(n.bl,"/api/v1/posts/pinned/").concat(e);return(0,s.Z)(t,"DELETE")},RemoveLikePost:e=>{let t="".concat(n.bl,"/api/v1/posts/").concat(e,"/");return(0,s.Z)(t,"DELETE")},TotalPost:()=>(0,s.Z)("".concat("https://jsonserver-i5n0.onrender.com","/stats"))}},9279:function(e,t,o){"use strict";o.d(t,{qr:function(){return i},sK:function(){return l},LM:function(){return a}});var n=o(4660),s=o(4810),r=o(5039);let i=(0,n.Ue)((0,s.tJ)((e,t)=>({dark:!1,toggleDark:()=>e({dark:!t().dark}),sidebar:!1,toggleSidebar:()=>e({sidebar:!t().sidebar}),open:!1,openRequestModal:t=>e({open:t})}),{name:"forumApp",storage:(0,s.FL)(()=>r.Z)})),a=(0,n.Ue)((0,s.tJ)((e,t)=>({access:null,refresh:null,profile:{},setAccess:t=>e(()=>({access:t})),setRefresh:t=>e(()=>({refresh:t})),setProfile:t=>e(()=>({profile:t}))}),{name:"forumUser",storage:(0,s.FL)(()=>r.Z)})),l=(0,n.Ue)((0,s.tJ)((e,t)=>({noties:[],setNoti:t=>e(()=>({noties:t})),addNoti:t=>e(e=>{var o,n,s;return{noties:[{link:"/student",img:(null==t?void 0:null===(o=t.notification)||void 0===o?void 0:o.image)||"/avatar/kimthiendung.jpg",title:null==t?void 0:null===(n=t.notification)||void 0===n?void 0:n.title,body:null==t?void 0:null===(s=t.notification)||void 0===s?void 0:s.body,isSeen:!1},...e.noties]}})}),{name:"forumNoti",storage:(0,s.FL)(()=>r.Z),onRehydrateStorage:e=>{r.Z.getItem("forumNoti").then(t=>{t?e.setNoti(JSON.parse(t)):e.setNoti(JSON.parse([]))}).catch(e=>{})}}));var c=o(4016);(0,n.Ue)((e,t)=>({loading:!1,error:"",page:1,data:[],postsCount:0,setPage:t=>e(()=>({page:t})),fetchPostListPage:async t=>{try{e({loading:!0,page:t});let o=c.Z.ListPost(t,6),n=await c.Z.TotalPost();e({loading:!1,data:o,postsCount:n.postsCount})}catch(t){e({loading:!1,error:t})}}}))},5039:function(e,t,o){"use strict";var n=o(5484);t.Z={getItem:async e=>(0,n.U2)(e).then(e=>e).catch(e=>{}),setItem:async(e,t)=>{await (0,n.t8)(e,t)},removeItem:async e=>{await (0,n.IV)(e)}}},6457:function(e,t,o){"use strict";o.d(t,{Cx:function(){return n},DN:function(){return s},bl:function(){return r}});let n="w3iggrA5WlOIoKGqvfjTJzdqdYWSsG3dCcUYpVT8",s="VDBAYgCdkAkrIxamKXptPSMrvvNKZFMLEs9Z7hhO4QUbkUR1iKntEXaIlZLiyaZ8wRnEIENbBJBF9PnthzI73LUtYqBmk2qI9yDmAGMKS3yushSzkQewdpTJy4k9O6iT",r="http://ky-de-appli-1fdbxk808lvu0-550379223.us-east-1.elb.amazonaws.com"},7217:function(e,t,o){"use strict";o.d(t,{Z:function(){return s}});var n=o(5039);async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r={method:t?String(t||"").toUpperCase():"GET"};"GET"!==r.method&&(o.files?r.body=o.files:r.body=JSON.stringify(o||{})),r.headers={"Content-Type":"application/json",...s},o.files&&delete r.headers["Content-Type"];let i=await n.Z.getItem("forumUser");if(i){var a;let e=JSON.parse(i),t=null==e?void 0:null===(a=e.state)||void 0===a?void 0:a.access;t&&(r.headers.Authorization="Bearer ".concat(t))}return fetch(e,r).then(e=>e.json())}},1396:function(e,t,o){e.exports=o(6685)}},function(e){e.O(0,[6685,1501,713,9540,2971,596,1744],function(){return e(e.s=4521)}),_N_E=e.O()}]);