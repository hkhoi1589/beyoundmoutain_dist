(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3995],{2490:function(e,t,n){Promise.resolve().then(n.bind(n,6486))},6486:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var o=n(7437),s=n(5590),a=n(1577),i=n(4016),l=n(6932),r=n(848),d=n(8864),c=n.n(d),u=n(6691),m=n.n(u),f=n(4033),v=n(2265);function h(){return(0,o.jsxs)("div",{id:"main",className:"p-4 overflow-y-auto flex-1",children:[(0,o.jsx)("div",{className:"animate-skeleton w-full h-72 rounded"}),(0,o.jsxs)("div",{className:"py-2 mb-4",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsx)("div",{className:"animate-skeleton w-72 sm:w-96 h-11"}),(0,o.jsx)("div",{className:"animate-skeleton w-14 sm:w-24 h-6"})]}),(0,o.jsx)("div",{className:"animate-skeleton w-full h-4 mb-2"}),(0,o.jsx)("div",{className:"animate-skeleton w-full h-4 mb-2"}),(0,o.jsx)("div",{className:"animate-skeleton w-96 h-4 mb-2"})]}),(0,o.jsx)("div",{className:"animate-skeleton w-full h-20 mb-8"})]})}let p=c()(()=>Promise.all([n.e(189),n.e(4403)]).then(n.bind(n,4403)),{loadableGenerated:{webpack:()=>[4403]},ssr:!1});function g(){var e,t;let n=(0,f.useSearchParams)(),d=n.get("id"),{post:c,isLoading:u,isError:g}=i.Z.GetDetailPost(d);return((0,l.jE)({extensions:[r.Z],content:""}),(0,v.useEffect)(()=>{g&&(toast.error("An error happened!"),console.log("detail post",g))},[g]),u||!c)?(0,o.jsx)(h,{}):(0,o.jsxs)("main",{id:"main",className:"p-4 overflow-y-auto flex-1",children:[(null==c?void 0:null===(e=c.images)||void 0===e?void 0:e.length)>0&&(null==c?void 0:null===(t=c.images)||void 0===t?void 0:t.map(e=>(0,o.jsx)(m(),{src:e.image,alt:"image.jpeg",sizes:"100vw",width:0,height:0,style:{width:"100%",height:"auto"}},e.id))),(0,o.jsxs)("div",{className:"py-2 mb-4",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("h2",{className:"text-3xl lg:text-4xl flex-1 leading-[2.72rem] font-semibold line-clamp-2",children:null==c?void 0:c.subject}),(0,o.jsx)(s.Z,{heart:null==c?void 0:c.thumps_up,id:null==c?void 0:c.uuid})]}),(0,o.jsx)("ul",{className:"mb-4",children:null==c?void 0:c.tags.map((e,t)=>(0,o.jsx)("li",{className:"badge badge-neutral mr-3",children:e},"tag-".concat(t)))}),(0,o.jsx)(a.Z,{content:null==c?void 0:c.content,maxWord:300})]}),(0,o.jsx)(p,{idPost:null==c?void 0:c.uuid})]})}},5590:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var o=n(7437),s=n(2265),a=n(9072),i=n.n(a),l=n(4016),r=n(8625);function d(e){let{heart:t,id:n}=e,[a,d]=(0,s.useState)(!1),[c,u]=(0,s.useState)(t),{profile:m}=(0,r.LM)();(0,s.useEffect)(()=>{if(c){let e=c.some(e=>{var t;return(null==e?void 0:null===(t=e.uuid)||void 0===t?void 0:t.replace(/[^0-9a-z]/gi,""))===(null==m?void 0:m.user_id)});d(e)}},[m,c]);let f=async()=>{d(!0),u(e=>[...e,{full_name:(null==m?void 0:m.last_name)+" "+(null==m?void 0:m.first_name),uuid:null==m?void 0:m.user_id}]),l.Z.LikePost(n)},v=async()=>{d(!1),u(e=>e.filter(e=>{var t;return(null==e?void 0:null===(t=e.uuid)||void 0===t?void 0:t.replace(/[^0-9a-z]/gi,""))!==(null==m?void 0:m.user_id)})),l.Z.RemoveLikePost(n)};return(0,o.jsx)("button",{onClick:a?v:f,className:"flex-shrink-0 ".concat(i().heart," ").concat(a&&i().is_animating," ").concat(a&&i().liked),children:(0,o.jsx)("span",{className:"flex justify-end text-base font-normal",children:null==c?void 0:c.length})})}},1577:function(e,t,n){"use strict";var o=n(7437),s=n(2265),a=n(5042),i=n(1396),l=n.n(i);t.Z=function(e){let{content:t="",classname:n="",maxWord:i=200}=e,[r,d]=(0,s.useState)(!0),c=s.useMemo(()=>({render:{url:e=>{let{attributes:t,content:n}=e;return(0,o.jsx)(l(),{...t,className:"text-secondary",target:"_blank",children:n})}}}),[]);return t.length>200?(0,o.jsxs)("p",{className:"".concat(n," break-all"),children:[r?"".concat(t.substring(0,i),"..."):(0,o.jsx)(a.Z,{options:c,children:t}),(0,o.jsx)("button",{className:"text-secondary block",onClick:()=>d(!r),children:r?"Read more":"Show less"})]}):(0,o.jsx)("p",{className:"".concat(n," break-all"),children:(0,o.jsx)(a.Z,{options:c,children:t})})}},4016:function(e,t,n){"use strict";var o=n(6457),s=n(7217),a=n(713),i=n(2601);t.Z={ListPinPostForSchool:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t=arguments.length>1?arguments[1]:void 0,n="".concat(o.bl,"/api/v1/posts-pinned?limit=").concat(e,"&offset=").concat(t),{data:i,isLoading:l}=(0,a.ZP)(n,s.Z);return{pinPosts:null==i?void 0:i.data,isLoading:l,isError:(null==i?void 0:i.status)===!1?null==i?void 0:i.message:""}},SearchPostSchool:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i="".concat(o.bl,"/api/v1/posts/search?limit=").concat(e,"&offset=").concat(t,"&q=").concat(n),{data:l,isLoading:r}=(0,a.ZP)(i,s.Z);return{posts:null==l?void 0:l.data,isLoading:r,isError:(null==l?void 0:l.status)===!1?null==l?void 0:l.message:""}},GetDetailPost:e=>{let t="".concat(o.bl,"/api/v1/posts/").concat(e),{data:n,isLoading:i,mutate:l}=(0,a.ZP)(t,s.Z);return{post:null==n?void 0:n.data,isLoading:i,isError:(null==n?void 0:n.status)===!1?null==n?void 0:n.message:"",mutate:l}},ListCommentPost:(e,t,n)=>{let i="".concat(o.bl,"/api/v1/posts/").concat(e,"/comments?limit=").concat(t,"&offset=").concat(n),{data:l,isLoading:r}=(0,a.ZP)(i,s.Z);return{comments_post:null==l?void 0:l.data,isLoading:r,isError:(null==l?void 0:l.status)===!1?Object.values(null==l?void 0:l.error)[0]:""}},CreatePostSchool:(e,t,n)=>{let a="".concat(o.bl,"/api/v1/posts");return(0,s.Z)(a,"POST",{subject:e,content:t,tags:n})},UploadImagePost:(e,t,n)=>{let a="".concat(o.bl,"/api/v1/posts/").concat(e,"/image"),i=new FormData;return i.append("image",t),i.append("caption",n),(0,s.Z)(a,"POST",{files:i},{"Content-Type":"multipart/form-data"})},CreateLocationPost:(e,t,n,a,i)=>{let l="".concat(o.bl,"/api/v1/post/").concat(e,"/location");return(0,s.Z)(l,"PUT",{primary_street_name:t,secondary_street_name:n,primary_location:a,secondary_location:i})},PinPostSchool:e=>{let t="".concat(o.bl,"/api/v1/posts/pinned/").concat(e);return(0,s.Z)(t,"PUT")},LikePost:e=>{let t="".concat(o.bl,"/api/v1/posts/").concat(e,"/");return(0,s.Z)(t,"PUT")},RemovePinPostSchool:e=>{let t="".concat(o.bl,"/api/v1/posts/pinned/").concat(e);return(0,s.Z)(t,"DELETE")},RemoveLikePost:e=>{let t="".concat(o.bl,"/api/v1/posts/").concat(e,"/");return(0,s.Z)(t,"DELETE")},TotalPost:()=>{let e="".concat(i.env.NEXT_PUBLIC_BASIC_API_ENDPOINT,"/stats");return(0,s.Z)(e)}}},8625:function(e,t,n){"use strict";n.d(t,{qr:function(){return i},t_:function(){return c},ww:function(){return u},sK:function(){return r},NV:function(){return d},LM:function(){return l}});var o=n(4660),s=n(4810),a=n(5039);let i=(0,o.Ue)((0,s.tJ)((e,t)=>({dark:!1,toggleDark:()=>e({dark:!t().dark}),sidebar:!1,toggleSidebar:()=>e({sidebar:!t().sidebar}),open:!1,openRequestModal:t=>e({open:t})}),{name:"forumApp",storage:(0,s.FL)(()=>a.Z)})),l=(0,o.Ue)((0,s.tJ)((e,t)=>({access:null,refresh:null,profile:{},friendsRequests:[],setAccess:t=>e(()=>({access:t})),setRefresh:t=>e(()=>({refresh:t})),setProfile:t=>e(()=>({profile:t})),setFriendRequests:t=>e(()=>({friendsRequests:t}))}),{name:"forumUser",storage:(0,s.FL)(()=>a.Z)})),r=(0,o.Ue)((0,s.tJ)((e,t)=>({noties:[],fcmToken:"",setFCMToken:t=>e(()=>({fcmToken:t})),setNoti:t=>e(()=>({noties:t})),addNoti:t=>e(e=>{var n,o,s;return{noties:[{link:"/",img:null==t?void 0:null===(n=t.notification)||void 0===n?void 0:n.image,title:null==t?void 0:null===(o=t.notification)||void 0===o?void 0:o.title,body:null==t?void 0:null===(s=t.notification)||void 0===s?void 0:s.body,isSeen:!1},...e.noties]}})}),{name:"forumNoti",storage:(0,s.FL)(()=>a.Z),onRehydrateStorage:e=>{a.Z.getItem("forumNoti").then(t=>{let n=JSON.parse(t),{noties:o,fcmToken:s}=null==n?void 0:n.state;t?(e.setNoti(o),e.setFCMToken(s)):(e.setNoti([]),e.setFCMToken(""))}).catch(e=>{})}})),d=(0,o.Ue)((e,t)=>({dataPosts:[],dataPinPosts:[],loadingAdd:!1,errorAdd:"",loadingAddChannel:!1,errorAddChannel:"",setDataPosts:t=>e(()=>({dataPosts:t})),setDataPinPosts:t=>e(()=>({dataPinPosts:t})),setLoadingAdd:t=>e(()=>({loadingAdd:t})),setErrorAdd:t=>e(()=>({errorAdd:t})),setLoadingAddChannel:t=>e(()=>({loadingAddChannel:t})),setErrorAddChannel:t=>e(()=>({errorAddChannel:t}))})),c=(0,o.Ue)((e,t)=>({dataChannels:[],loadingAdd:!1,errorAdd:"",setDataChannels:t=>e(()=>({dataChannels:t})),setLoadingAdd:t=>e(()=>({loadingAdd:t})),setErrorAdd:t=>e(()=>({errorAdd:t}))})),u=(0,o.Ue)((e,t)=>({dataComments:[],loadingAdd:!1,errorAdd:"",setDataComments:t=>e(()=>({dataComments:t})),setLoadingAdd:t=>e(()=>({loadingAdd:t})),setErrorAdd:t=>e(()=>({errorAdd:t}))}))},5039:function(e,t,n){"use strict";var o=n(5484);t.Z={getItem:async e=>(0,o.U2)(e).then(e=>e).catch(e=>{}),setItem:async(e,t)=>{await (0,o.t8)(e,t)},removeItem:async e=>{await (0,o.IV)(e)}}},6457:function(e,t,n){"use strict";n.d(t,{Cx:function(){return o},DN:function(){return s},MI:function(){return c},Pm:function(){return i},bl:function(){return a},dr:function(){return r},hp:function(){return l},nj:function(){return d}});let o="AfBMQbX0e68dTTyZbmn8oC9UL5zPdZAaf4XwU1mR",s="G0sBIyaqex7g67FSDIFyJqeBdxyo8Msg4fUxnqeAAX22xwH6KMeVLQwJRox34HJvMxdV1PPyxMBdnFBPk7DD3IByCJtL6MhOojcCJSDWGIC5OqFm0AlhcsA7fTIeDqsP",a="https://api-dev.koolyard.com",i=10,l=5,r=5,d=5,c=[{label:"Newest channel",field:"created"},{label:"Oldest channel",field:"-created"},{label:"Most members",field:"members"},{label:"Fewest members",field:"-members"},{label:"A to Z",field:"name"},{label:"Z to A",field:"-name"}]},7217:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var o=n(5039);async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a={method:t?String(t||"").toUpperCase():"GET"};"GET"!==a.method&&(n.files?a.body=n.files:a.body=JSON.stringify(n||{})),a.headers={"Content-Type":"application/json",...s},n.files&&delete a.headers["Content-Type"];let i=await o.Z.getItem("forumUser");if(i){var l;let e=JSON.parse(i),t=null==e?void 0:null===(l=e.state)||void 0===l?void 0:l.access;t&&(a.headers.Authorization="Bearer ".concat(t))}return fetch(e,a).then(e=>(403===e.status?window&&(window.location.href="/error/403/"):404===e.status?window&&(window.location.href="/error/404/"):401===e.status&&o.Z.removeItem("forumUser"),e.json()))}},9072:function(e){e.exports={heart:"Heart_heart__XQp9J",liked:"Heart_liked__3nizD",is_animating:"Heart_is_animating__wMhvd","heart-burst":"Heart_heart-burst__GquLA"}}},function(e){e.O(0,[3572,6685,5166,6012,6691,1323,227,2971,596,1744],function(){return e(e.s=2490)}),_N_E=e.O()}]);