"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1513],{1513:function(n,e,t){t.r(e),t.d(e,{default:function(){return m}});var a=t(7437),l=t(2265),c=t(1396),s=t.n(c);function o(n){let{title:e,content:t,open:l,onConfirm:c}=n;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"modal sm:modal-middle backdrop:hidden ".concat(l?"modal-open":""),children:(0,a.jsxs)("div",{className:"modal-box",children:[(0,a.jsx)("h3",{className:"font-bold text-lg",children:e}),(0,a.jsx)("p",{className:"py-4",children:t}),(0,a.jsxs)("div",{className:"modal-action",children:[(0,a.jsx)("label",{className:"btn",onClick:()=>c(!1),children:"Cancel"}),(0,a.jsx)("label",{className:"btn btn-error text-white px-8",onClick:()=>c(!0),children:"OK"})]})]})})})}var i=t(6816);function r(n){let{id:e,onRemoveIt:t}=n,[c,s]=(0,l.useState)(!1),r=async n=>{if(n){let n=await i.Z.RemoveChannel(e);n&&n.status&&t()}s(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"dropdown dropdown-end",children:[(0,a.jsx)("label",{tabIndex:0,className:"btn btn-sm btn-circle btn-ghost m-1",children:(0,a.jsx)("i",{className:"ri-more-2-fill"})}),(0,a.jsx)("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-36",children:(0,a.jsx)("li",{children:(0,a.jsx)("a",{onClick:()=>s(!0),children:"Delete channel"})})})]}),(0,a.jsx)(o,{open:c,onConfirm:r,title:"Warning",content:"Are you sure you want to delete it ?"})]})}function d(n){let{id:e,name:t,owner:c,description:o,members:i,posts:d,isJoinded:h,fill:m}=n,[u,v]=(0,l.useState)(!1);return(0,a.jsxs)("li",{className:"flex items-center justify-between p-2 sm:p-4 ".concat(u?"hidden":""),children:[(0,a.jsxs)("div",{className:"flex justify-center items-start flex-1",children:[(0,a.jsx)("i",{className:"ri-hashtag text-2xl"}),(0,a.jsxs)("div",{className:"ml-4 flex-1 line-clamp-2",children:[(0,a.jsx)(s(),{href:"/forum/channel?channelId=".concat(e),children:(0,a.jsx)("h4",{className:"capitalize hover:text-accent-focus",children:t})}),(0,a.jsxs)("ul",{className:"flex flex-col list-disc sm:list-none sm:flex-row sm:items-center sm:space-x-2",children:[h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("li",{className:"text-xs font-normal text-accent-focus",children:[(0,a.jsx)("i",{className:"ri-check-fill mr-2"}),"joined"]}),(0,a.jsx)("li",{className:"font-bold hidden sm:inline",children:"•"})]}),(0,a.jsx)("li",{className:"text-xs font-normal",children:"".concat(i," ").concat(i>1?"members":"member")}),(0,a.jsx)("li",{className:"font-bold hidden sm:inline",children:"•"}),(0,a.jsx)("li",{className:"text-xs font-normal",children:"".concat(d," ").concat(d>1?"posts":"post")}),o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("li",{className:"font-bold hidden sm:inline",children:"•"}),(0,a.jsx)("li",{className:"text-xs font-normal",children:o.length>200?"".concat(o.substring(0,maxWord),"..."):o})]})]})]})]}),m&&(0,a.jsx)(r,{id:e,onRemoveIt:()=>v(!0)})]})}var h=t(9450);function m(n){let{className:e="",src:t="/api/v1/channels/search",loader:c=!1,limit:s=10,q:o="",fill:i=!1}=n;if(!c)return;let{data:r,error:m,size:u,setSize:v,hitEnd:f}=(0,h.Q)(t,{limit:s,q:o});return m?"An error has occurred.":(0,a.jsxs)("div",{children:[r&&r.map((n,t)=>(0,a.jsx)("ul",{className:"divide-y-2 divide-neutral ".concat(e),children:n.data&&n.data.results&&n.data.results.map((n,e)=>(0,l.createElement)(d,{...n,key:e,fill:!0}))},t)),r&&r.length>0?!f&&s<r.length&&(0,a.jsx)("div",{className:"text-center my-4",children:(0,a.jsx)("button",{className:"btn btn-sm btn-outline",onClick:()=>v(u+1),children:"Load more"})}):(0,a.jsx)("div",{className:"text-center my-4 text-lg",children:"No data"})]})}},6816:function(n,e,t){var a=t(6457),l=t(7217),c=t(713),s=t(2601);e.Z={GetDetailCommentChannel:(n,e)=>{let t="".concat(a.bl,"/api/v1/channel/").concat(n,"/comments/").concat(e),{data:s,isLoading:o}=(0,c.ZP)(t,l.Z);return{detail_comment:s,isLoading:o,isError:(null==s?void 0:s.status)===!1?null==s?void 0:s.message:""}},SearchChannelSchool:function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=!(arguments.length>4)||void 0===arguments[4]||arguments[4],i="".concat(a.bl,"/api/v1/channels/search?ordering=").concat(n,"&limit=").concat(e,"&offset=").concat(t,"&q=").concat(s),{data:r,isLoading:d}=(0,c.ZP)(o?i:null,l.Z);return{channels:null==r?void 0:r.data,isLoading:d,isError:(null==r?void 0:r.status)===!1?null==r?void 0:r.message:""}},SearchMemberChannel:function(n,e,t){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o="".concat(a.bl,"/api/v1/channels/").concat(n,"/members/search?limit=").concat(e,"&offset=").concat(t,"&q=").concat(s),{data:i,isLoading:r}=(0,c.ZP)(o,l.Z);return{members:i,isLoading:r,isError:(null==i?void 0:i.status)===!1?null==i?void 0:i.message:""}},ListPinnedPostsChannel:(n,e,t)=>{let s="".concat(a.bl,"/api/v1/channels/").concat(n,"/posts-pinned?limit=").concat(e,"&offset=").concat(t),{data:o,isLoading:i,mutate:r}=(0,c.ZP)(s,l.Z);return{pinPosts:null==o?void 0:o.data,isLoading:i,isError:(null==o?void 0:o.status)===!1?null==o?void 0:o.message:"",mutate:r}},SearchPostChannel:function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,t=arguments.length>2?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o="".concat(a.bl,"/api/v1/channels/").concat(n,"/posts/search?limit=").concat(e,"&offset=").concat(t,"&q=").concat(s),{data:i,isLoading:r,mutate:d}=(0,c.ZP)(o,l.Z);return{posts:null==i?void 0:i.data,isLoading:r,isError:(null==i?void 0:i.status)===!1?null==i?void 0:i.message:"",mutate:d}},CreateChannelSchool:function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c="".concat(a.bl,"/api/v1/channels/");return(0,l.Z)(c,"POST",{name:n,description:e,is_private:t})},InviteUsersChannel:(n,e,t)=>{let c="".concat(a.bl,"/api/v1/channels/").concat(n,"/invitations");return(0,l.Z)(c,"POST",{members:e,message:t})},CreatePostChannel:(n,e,t,c)=>{let s="".concat(a.bl,"/api/v1/channels/").concat(n,"/posts");return(0,l.Z)(s,"POST",{subject:e,content:t,tags:c})},RequestJoinChannel:(n,e)=>{let t="".concat(a.bl,"/api/v1/channels/").concat(n,"/request");return(0,l.Z)(t,"POST",{message:e})},UpdateCommentChannel:(n,e,t,c,s,o)=>{let i="".concat(a.bl,"/api/v1/channel/").concat(n,"/comments/").concat(e);return(0,l.Z)(i,"PUT",{content:t,author:c,status:s,parent:o})},UpdateChannel:(n,e,t)=>{let c="".concat(a.bl,"/api/v1/channels/").concat(n);return(0,l.Z)(c,"PUT",{name:e,description:t})},PinPostChannel:(n,e)=>{let t="".concat(a.bl,"/api/v1/channels/").concat(n,"/posts/pinned/").concat(e);return(0,l.Z)(t,"PUT")},AcceptRequestJoinChannel:(n,e)=>{let t="".concat(a.bl,"/api/v1/channels/").concat(n,"/request/").concat(e);return(0,l.Z)(t,"PUT")},PartialUpdateCommentChannel:(n,e,t,c,s,o)=>{let i="".concat(a.bl,"/api/v1/channel/").concat(n,"/comments/").concat(e);return(0,l.Z)(i,"PATCH",{content:t,author:c,status:s,parent:o})},ChangeStatusChannel:(n,e)=>{let t="".concat(a.bl,"/api/v1/channels/").concat(n);return(0,l.Z)(t,"PATCH",{status:e})},JoinUsersChannel:n=>{let e="".concat(a.bl,"/api/v1/channels/").concat(n,"/invitations");return(0,l.Z)(e,"PATCH")},UpdatePostChannel:(n,e,t,c,s,o)=>{let i="".concat(a.bl,"/api/v1/channels/").concat(n,"/posts/").concat(e);return(0,l.Z)(i,"PATCH",{subject:t,content:c,is_public:s,tags:o})},DestroyCommentChannel:(n,e)=>{let t="".concat(a.bl,"/api/v1/channel/").concat(n,"/comments/").concat(e);return(0,l.Z)(t,"DELETE")},RemoveChannel:n=>{let e="".concat(a.bl,"/api/v1/channels/").concat(n);return(0,l.Z)(e,"DELETE")},RejectChannel:n=>{let e="".concat(a.bl,"/api/v1/channels/").concat(n,"/invitations");return(0,l.Z)(e,"DELETE")},RemovePinPostChannel:(n,e)=>{let t="".concat(a.bl,"/api/v1/channels/").concat(n,"/posts/pinned/").concat(e);return(0,l.Z)(t,"DELETE")},DeletePostChannel:(n,e)=>{let t="".concat(a.bl,"/api/v1/channels/").concat(n,"/posts/").concat(e);return(0,l.Z)(t,"DELETE")},ListChannel:n=>{let e="".concat(s.env.NEXT_PUBLIC_BASIC_API_ENDPOINT,"/channels?_page=").concat(n,"&_limit=6"),{data:t,isLoading:a}=(0,c.ZP)(e,l.Z);return{channels:t,isLoading:a,isError:(null==t?void 0:t.status)===!1?null==t?void 0:t.message:""}}}},5039:function(n,e,t){var a=t(5484);e.Z={getItem:async n=>(0,a.U2)(n).then(n=>n).catch(n=>{}),setItem:async(n,e)=>{await (0,a.t8)(n,e)},removeItem:async n=>{await (0,a.IV)(n)}}},6457:function(n,e,t){t.d(e,{Cx:function(){return a},DN:function(){return l},MI:function(){return d},Pm:function(){return s},bl:function(){return c},dr:function(){return i},hp:function(){return o},nj:function(){return r}});let a="AfBMQbX0e68dTTyZbmn8oC9UL5zPdZAaf4XwU1mR",l="G0sBIyaqex7g67FSDIFyJqeBdxyo8Msg4fUxnqeAAX22xwH6KMeVLQwJRox34HJvMxdV1PPyxMBdnFBPk7DD3IByCJtL6MhOojcCJSDWGIC5OqFm0AlhcsA7fTIeDqsP",c="https://api-dev.koolyard.com",s=10,o=5,i=5,r=5,d=[{label:"Newest channel",field:"created"},{label:"Oldest channel",field:"-created"},{label:"Most members",field:"members"},{label:"Fewest members",field:"-members"},{label:"A to Z",field:"name"},{label:"Z to A",field:"-name"}]},7217:function(n,e,t){t.d(e,{Z:function(){return l}});var a=t(5039);async function l(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c={method:e?String(e||"").toUpperCase():"GET"};"GET"!==c.method&&(t.files?c.body=t.files:c.body=JSON.stringify(t||{})),c.headers={"Content-Type":"application/json",...l},t.files&&delete c.headers["Content-Type"];let s=await a.Z.getItem("forumUser");if(s){var o;let n=JSON.parse(s),e=null==n?void 0:null===(o=n.state)||void 0===o?void 0:o.access;e&&(c.headers.Authorization="Bearer ".concat(e))}return fetch(n,c).then(n=>(403===n.status?window&&(window.location.href="/error/403/"):404===n.status?window&&(window.location.href="/error/404/"):401===n.status&&a.Z.removeItem("forumUser"),n.json()))}},9450:function(n,e,t){t.d(e,{Q:function(){return s}});var a=t(7405),l=t(7217),c=t(6457);let s=function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:10},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s="".concat(new URLSearchParams(e)),o=(0,a.ZP)((t,a)=>a&&!a.data?null:"".concat(c.bl+n,"?offset=").concat(t*e.limit,"&").concat(s),l.Z,{revalidateIfStale:!0,revalidateOnFocus:!1,revalidateOnReconnect:!0,shouldRetryOnError:!1,errorRetryCount:3,...t}),i=!1,{data:r}=o;if(r){var d;i=(null===(d=r[r.length-1].data)||void 0===d?void 0:d.results.length)===0}return{...o,hitEnd:i}}}}]);