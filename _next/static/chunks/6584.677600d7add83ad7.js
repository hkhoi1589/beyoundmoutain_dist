(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6584,9569],{2601:function(e,t,n){"use strict";var r,l;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(l=n.g.process)?void 0:l.env)?n.g.process:n(8960)},9599:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(7437);n(2265);var l=n(9072),s=n.n(l);function a(e){let{amount:t}=e;return(0,r.jsx)("button",{className:"flex-shrink-0 ".concat(s().heart," bg-left"),children:(0,r.jsx)("span",{className:"flex justify-end text-base font-normal",children:t})})}n(4016)},9569:function(e,t,n){"use strict";n.r(t);var r=n(7437),l=n(4897),s=n(1824),a=n(6816),i=n(6301),o=n(8625),c=n(1396),u=n.n(c),d=n(2265),m=n(171);t.default=function(e){var t,n;let{className:c=""}=e,[f,h]=(0,d.useState)(!1),[p,v]=(0,d.useState)(""),[x,b]=(0,d.useState)(""),[j,g]=(0,d.useState)(!1),{dataChannels:N,setDataChannels:y,setLoadingAdd:P}=(0,o.t_)(),{profile:Z}=(0,o.LM)(),{friends:w,isLoading:_,isError:T}=i.Z.GetFriends(Z.user_id),C=async()=>{var e;g(!0),P(!0);let t=await a.Z.CreateChannelSchool(p,x,f);if(null==t?void 0:t.status){let n={count:N.count+1,results:[{description:x,member:0,name:p,owner:Z,posts:0},...N.results]};y(n),m.toast.success(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)}else m.toast.error(null==t?void 0:t.message);g(!1),P(!1)};return(0,r.jsxs)(l.Z,{className:"btn btn-sm btn-primary hover:text-base-300 rounded-full ".concat(c),title:"New Channel",handleSubmit:C,children:[(0,r.jsx)("h3",{className:"font-bold text-lg",children:"Create A Channel"}),(0,r.jsx)("input",{type:"text",value:p,onChange:e=>v(e.target.value),className:"outline-none placeholder:truncate h-10 pt-4 text-base bg-transparent border-solid border-b-neutral border-b-2 input-sm w-full focus-within:border-primary",placeholder:"Add a name..."}),(0,r.jsx)("input",{type:"text",value:x,onChange:e=>b(e.target.value),className:"outline-none placeholder:truncate h-10 pt-4 text-base bg-transparent border-solid border-b-neutral border-b-2 input-sm w-full focus-within:border-primary",placeholder:"Description..."}),(0,r.jsx)("div",{className:"text-sm font-semibold pt-3 pb-2",children:"Visibility"}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("label",{className:"flex items-center mb-2 text-sm",htmlFor:"radio_public",children:[(0,r.jsx)("input",{type:"radio",id:"radio_public",name:"radio_channel1",className:"radio mr-4",onChange:()=>h(!1),checked:!f}),"Public - anyone in [school name]"]}),(0,r.jsxs)("label",{className:"flex items-center mb-2 text-sm",htmlFor:"radio_private",children:[(0,r.jsx)("input",{type:"radio",id:"radio_private",name:"radio_channel2",className:"radio mr-4",onChange:()=>h(!0),checked:f}),(0,r.jsxs)("div",{className:"flex flex-col",children:["Private - Only specific people",(0,r.jsx)("span",{className:"text-neutral-focus",children:"join by invitation"})]})]})]}),(0,r.jsx)("div",{className:"text-sm font-normal pt-3 pb-2",children:"Invite member to this Channel"}),(0,r.jsx)(s.Z,{className:"w-full"}),(0,r.jsx)("ul",{className:"overflow-y-auto max-h-52",children:(null==w?void 0:null===(t=w.results)||void 0===t?void 0:t.length)>0?null==w?void 0:null===(n=w.results)||void 0===n?void 0:n.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center py-1",children:[(0,r.jsx)("input",{type:"checkbox",className:"checkbox mr-4"}),(0,r.jsxs)("div",{className:"flex justify-center items-center flex-1",children:[null==e?void 0:e.avatar,(0,r.jsx)("div",{className:"ml-4 flex-1 line-clamp-2",children:(0,r.jsx)(u(),{href:e&&e.uuid?e.uuid:"#",children:(0,r.jsx)("h4",{className:"capitalize hover:text-accent-focus",children:null==e?void 0:e.full_name})})})]})]},"member-".concat(t))):(0,r.jsx)("li",{className:"flex items-center py-1",children:(0,r.jsx)("div",{className:"flex justify-center items-center flex-1",children:"No Friends"})})})]})}},5493:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(7437),l=n(6691),s=n.n(l);function a(e){let{className:t,url:n,name:l}=e;return(0,r.jsx)("div",{className:"avatar placeholder",children:(0,r.jsx)("div",{className:"bg-base-300/60 rounded-full ".concat(t),children:n?(0,r.jsx)(s(),{src:n,alt:"avatar.jpg",width:0,height:0,style:{width:"100%",height:"auto"}}):(0,r.jsx)("span",{className:"text-2xl uppercase",children:l})})})}},1824:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(7437),l=n(2265),s=n(9716),a=n(1513),i=n(209);function o(e){let{className:t=""}=e,[n,o]=(0,l.useState)("Post"),[c,u]=(0,l.useState)(!1),[d,m]=(0,l.useState)(!1),[f,h]=(0,l.useState)(""),p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,[n,r]=(0,l.useState)(""),s=(0,l.useRef)();return(0,l.useEffect)(()=>(s.current=setTimeout(()=>r(e),t),()=>{clearTimeout(s.current)}),[e,t]),n}(f,500);(0,l.useEffect)(()=>{p?m(!0):m(!1)},[p]);let v=e=>{u(!1),o(e)};return(0,r.jsx)("div",{className:"container mx-auto p-4 ".concat(t),children:(0,r.jsxs)("div",{className:"relative w-full",children:[(0,r.jsx)("button",{className:"btn btn-sm btn-ghost btn-circle z-10 absolute top-2 left-2",children:(0,r.jsx)("i",{className:"ri-search-line text-xl opacity-80"})}),(0,r.jsxs)("div",{className:"dropdown w-full",children:[(0,r.jsx)("input",{className:"w-full input border-neutral rounded-full pl-10 pr-24",placeholder:"Search",onChange:e=>h(e.target.value),tabIndex:1}),(0,r.jsx)("div",{tabIndex:1,className:"dropdown-content z-40 shadow bg-base-100 rounded-box w-full",children:p&&"User"===n?(0,r.jsx)(i.Z,{loader:d,limit:20,q:p}):"Channel"===n?(0,r.jsx)(a.default,{loader:d,limit:20,q:p}):(0,r.jsx)(s.Z,{loader:d,limit:20,q:p})})]}),(0,r.jsxs)("div",{className:"dropdown dropdown-end absolute right-2 top-2 ".concat(c?"dropdown-open":""),children:[(0,r.jsx)("label",{className:"btn btn-sm rounded-full",onClick:()=>u(!c),children:n}),(0,r.jsxs)("ul",{className:"dropdown-content z-40 menu p-2 shadow bg-base-100 rounded-box w-32",children:[(0,r.jsx)("li",{children:(0,r.jsx)("a",{onClick:()=>v("Post"),children:"Post"})}),(0,r.jsx)("li",{children:(0,r.jsx)("a",{onClick:()=>v("Channel"),children:"Channel"})}),(0,r.jsx)("li",{children:(0,r.jsx)("a",{onClick:()=>v("User"),children:"User"})})]})]})]})})}},9716:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(7437),l=n(2265),s=n(9599),a=n(1396),i=n.n(a),o=n(5493);function c(e){let{uuid:t,subject:n,author:a,last_comment:c,thumps_up:u,fill:d}=e,[m]=(0,l.useState)(a||{});return(0,r.jsxs)("li",{className:"flex items-center justify-between p-2 sm:p-4",children:[(0,r.jsxs)("div",{className:"flex justify-center items-center flex-1",children:[(0,r.jsx)(o.default,{url:m.avatar,name:n?null==n?void 0:n.charAt(0):"Me",className:"w-12"}),(0,r.jsxs)("div",{className:"ml-2 sm:ml-4 flex-1 line-clamp-2",children:[(0,r.jsx)(i(),{href:"/forum/detail?id=".concat(t),children:(0,r.jsx)("h4",{className:"capitalize hover:text-accent-focus",children:n})}),(0,r.jsxs)("ul",{className:"flex flex-col list-disc sm:list-none sm:flex-row sm:items-center sm:space-x-2",children:[m.full_name&&(0,r.jsx)("li",{className:"text-sm font-normal underline",children:m.full_name}),c&&(0,r.jsx)("li",{className:"font-bold hidden sm:inline",children:"â€¢"}),(0,r.jsx)("li",{className:"text-sm font-normal hidden sm:inline",children:(0,r.jsx)("span",{className:"underline",children:c})})]})]})]}),d&&(0,r.jsx)("div",{className:"flex flex-col items-end",children:(0,r.jsx)(s.Z,{amount:null==u?void 0:u.length})})]})}var u=n(9450);function d(e){let{className:t="",src:n="/api/v1/posts/search",loader:s=!1,limit:a=10,q:i="",fill:o}=e;if(!s)return;let{data:d,error:m,size:f,setSize:h,hitEnd:p}=(0,u.Q)(n,{limit:a,q:i});return m?"An error has occurred.":(0,r.jsxs)("div",{children:[d&&d.map((e,n)=>(0,r.jsx)("ul",{className:"divide-y-2 divide-neutral ".concat(t),children:e.data&&e.data.results&&e.data.results.map((e,t)=>(0,l.createElement)(c,{...e,key:t,fill:o}))},n)),d&&d.length>0?!p&&a<d.length&&(0,r.jsx)("div",{className:"text-center my-4",children:(0,r.jsx)("button",{className:"btn btn-sm btn-outline",onClick:()=>h(f+1),children:"Load more"})}):(0,r.jsx)("div",{className:"text-center my-4 text-lg",children:"No data"})]})}},209:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(7437),l=n(2265),s=n(1396),a=n.n(s),i=n(5493);function o(e){let{uuid:t,email:n,full_name:l,avatar:s}=e;return(0,r.jsx)("li",{className:"flex items-center justify-between p-2 sm:p-4",children:(0,r.jsxs)("div",{className:"flex justify-center items-center flex-1",children:[(0,r.jsx)(i.default,{url:s,name:l?l.charAt(0):"",className:"w-12"}),(0,r.jsx)("div",{className:"ml-2 sm:ml-4 flex-1 line-clamp-2",children:(0,r.jsxs)(a(),{href:"/user/".concat(t),children:[(0,r.jsx)("h4",{className:"capitalize hover:text-accent-focus",children:l}),(0,r.jsx)("p",{className:"text-sm hover:text-accent-focus",children:n})]})})]})})}var c=n(9450);function u(e){let{className:t="",src:n="/api/v1/users/search",loader:s=!1,limit:a=10,q:i=""}=e;if(!s)return;let{data:u,error:d,size:m,setSize:f,hitEnd:h}=(0,c.Q)(n,{limit:a,q:i});return d?"An error has occurred.":(0,r.jsxs)("div",{children:[u&&u.map((e,n)=>(0,r.jsx)("ul",{className:"divide-y-2 divide-neutral ".concat(t),children:e.data&&e.data.results&&e.data.results.map((e,t)=>(0,l.createElement)(o,{...e,key:t,fill:!0}))},n)),u&&u.length>0?!h&&a<u.length&&(0,r.jsx)("div",{className:"text-center my-4",children:(0,r.jsx)("button",{className:"btn btn-sm btn-outline",onClick:()=>f(m+1),children:"Load more"})}):(0,r.jsx)("div",{className:"text-center my-4 text-lg",children:"No data"})]})}},4016:function(e,t,n){"use strict";var r=n(6457),l=n(7217),s=n(713),a=n(2601);t.Z={ListPinPostForSchool:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t=arguments.length>1?arguments[1]:void 0,n="".concat(r.bl,"/api/v1/posts-pinned?limit=").concat(e,"&offset=").concat(t),{data:a,isLoading:i}=(0,s.ZP)(n,l.Z);return{pinPosts:null==a?void 0:a.data,isLoading:i,isError:(null==a?void 0:a.status)===!1?null==a?void 0:a.message:""}},SearchPostSchool:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a="".concat(r.bl,"/api/v1/posts/search?limit=").concat(e,"&offset=").concat(t,"&q=").concat(n),{data:i,isLoading:o}=(0,s.ZP)(a,l.Z);return{posts:null==i?void 0:i.data,isLoading:o,isError:(null==i?void 0:i.status)===!1?null==i?void 0:i.message:""}},GetDetailPost:e=>{let t="".concat(r.bl,"/api/v1/posts/").concat(e),{data:n,isLoading:a,mutate:i}=(0,s.ZP)(t,l.Z);return{post:null==n?void 0:n.data,isLoading:a,isError:(null==n?void 0:n.status)===!1?null==n?void 0:n.message:"",mutate:i}},ListCommentPost:(e,t,n)=>{let a="".concat(r.bl,"/api/v1/posts/").concat(e,"/comments?limit=").concat(t,"&offset=").concat(n),{data:i,isLoading:o}=(0,s.ZP)(a,l.Z);return{comments_post:null==i?void 0:i.data,isLoading:o,isError:(null==i?void 0:i.status)===!1?Object.values(null==i?void 0:i.error)[0]:""}},CreatePostSchool:(e,t,n)=>{let s="".concat(r.bl,"/api/v1/posts");return(0,l.Z)(s,"POST",{subject:e,content:t,tags:n})},UploadImagePost:(e,t,n)=>{let s="".concat(r.bl,"/api/v1/posts/").concat(e,"/image"),a=new FormData;return a.append("image",t),a.append("caption",n),(0,l.Z)(s,"POST",{files:a},{"Content-Type":"multipart/form-data"})},CreateLocationPost:(e,t,n,s,a)=>{let i="".concat(r.bl,"/api/v1/post/").concat(e,"/location");return(0,l.Z)(i,"PUT",{primary_street_name:t,secondary_street_name:n,primary_location:s,secondary_location:a})},PinPostSchool:e=>{let t="".concat(r.bl,"/api/v1/posts/pinned/").concat(e);return(0,l.Z)(t,"PUT")},LikePost:e=>{let t="".concat(r.bl,"/api/v1/posts/").concat(e,"/");return(0,l.Z)(t,"PUT")},RemovePinPostSchool:e=>{let t="".concat(r.bl,"/api/v1/posts/pinned/").concat(e);return(0,l.Z)(t,"DELETE")},RemoveLikePost:e=>{let t="".concat(r.bl,"/api/v1/posts/").concat(e,"/");return(0,l.Z)(t,"DELETE")},TotalPost:()=>{let e="".concat(a.env.NEXT_PUBLIC_BASIC_API_ENDPOINT,"/stats");return(0,l.Z)(e)}}},6301:function(e,t,n){"use strict";var r=n(6457),l=n(7217),s=n(713);t.Z={GetFriends:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o="".concat(r.bl,"/api/v1/users/").concat(e,"/friends?ordering=").concat(t,"&limit=").concat(n,"&offset=").concat(a,"&q=").concat(i),{data:c,isLoading:u}=(0,s.ZP)(o,l.Z);return{friends:null==c?void 0:c.data,isLoading:u,isError:(null==c?void 0:c.status)===!1?null==c?void 0:c.message:""}},GetFriendsRequest:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a="".concat(r.bl,"/api/v1/users/").concat(e,"/friend-request?limit=").concat(t,"&offset=").concat(n),{data:i,isLoading:o,mutate:c}=(0,s.ZP)(a,l.Z);return{requests:null==i?void 0:i.data,isLoading:o,isError:(null==i?void 0:i.status)===!1?null==i?void 0:i.message:"",mutate:c}},GetProfile:()=>{let e="".concat(r.bl,"/api/v1/userprofile/me"),{data:t,isLoading:n}=(0,s.ZP)(e,l.Z);return{profile:t,isLoading:n,isError:(null==t?void 0:t.status)===!1?null==t?void 0:t.message:""}},GetUserProfile:e=>{let t="".concat(r.bl,"/api/v1/userprofile/").concat(e,"/profile"),{data:n,isLoading:a,error:i}=(0,s.ZP)(t,l.Z);return{user_profile:n,isLoading:a,isError:i}},SearchAllUser:(e,t,n)=>{let a="".concat(r.bl,"/api/v1/users/search?limit=").concat(e,"&offset=").concat(t,"&q=").concat(n),{data:i,isLoading:o}=(0,s.ZP)(a,l.Z);return{users:i,isLoading:o,isError:(null==i?void 0:i.status)===!1?null==i?void 0:i.message:""}},AddHobbyUserProfile:(e,t)=>{let n="".concat(r.bl,"/api/v1/hobby/profile");return(0,l.Z)(n,"POST",{type_id:e,description:t})},SendFriendRequest:(e,t)=>{let n="".concat(r.bl,"/api/v1/users/").concat(e,"/friend-request");return(0,l.Z)(n,"POST",{message:t})},AcceptFriendRequest:e=>{let t="".concat(r.bl,"/api/v1/users/").concat(e,"/accept-friend");return(0,l.Z)(t,"POST")},UpdateHobbyUserProfile:(e,t,n)=>{let s="".concat(r.bl,"/api/v1/hobby/profile");return(0,l.Z)(s,"PUT",{id:e,type_id:t,description:n})},UpdateLocationUserProfile:(e,t,n,s,a,i,o,c,u,d,m)=>{let f="".concat(r.bl,"/api/v1/location/profile");return(0,l.Z)(f,"PUT",{primary_street_name:e,secondary_street_name:t,primary_location:n,secondary_location:s,city:a,city_area:i,state:o,postal_code:c,country:u,country_area:d,phone:m})},ChangePassword:(e,t)=>{let n="".concat(r.bl,"/api/v1/users/change-password");return(0,l.Z)(n,"PUT",{old_password:e,new_password:t})},UpdateUserStatusSchool:(e,t)=>{let n="".concat(r.bl,"/api/v1/users/change-status");return(0,l.Z)(n,"PUT",{id:e,is_active:t})},ResetPassword:(e,t,n,s)=>{let a="".concat(r.bl,"/api/v1/users/forgot-password");return(0,l.Z)(a,"PUT",{email:e,token:t,new_password:n,retype_new_password:s})},SearchEmailForgotPassword:e=>{let t="".concat(r.bl,"/api/v1/users/forgot-password/search-email");return(0,l.Z)(t,"PUT",{email:e})},VerifyForgotPasswordToken:e=>{let t="".concat(r.bl,"/api/v1/users/forgot-password/verify-token");return(0,l.Z)(t,"PUT",{token:e})},UpdateUserProfile:(e,t,n,s,a)=>{let i="".concat(r.bl,"/api/v1/userprofile/profile");return(0,l.Z)(i,"PATCH",{birthday:e,phone:t,gender:n,description:s,nickname:a})},RemoveHobbyUser:e=>{let t="".concat(r.bl,"/api/v1/hobby/profile");return(0,l.Z)(t,"DELETE",{id:e})},RejectFriendRequest:e=>{let t="".concat(r.bl,"/api/v1/users/").concat(e,"/reject-friend");return(0,l.Z)(t,"DELETE")},ListCommentByIdPost:e=>{let t="".concat(r.bl,"/comments?postId=").concat(e);return(0,l.Z)(t)}}},9072:function(e){e.exports={heart:"Heart_heart__XQp9J",liked:"Heart_liked__3nizD",is_animating:"Heart_is_animating__wMhvd","heart-burst":"Heart_heart-burst__GquLA"}},8960:function(e){!function(){var t={229:function(e){var t,n,r,l=e.exports={};function s(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var o=[],c=!1,u=-1;function d(){c&&r&&(c=!1,r.length?o=r.concat(o):u=-1,o.length&&m())}function m(){if(!c){var e=i(d);c=!0;for(var t=o.length;t;){for(r=o,o=[];++u<t;)r&&r[u].run();u=-1,t=o.length}r=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function h(){}l.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];o.push(new f(e,t)),1!==o.length||c||i(m)},f.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=h,l.addListener=h,l.once=h,l.off=h,l.removeListener=h,l.removeAllListeners=h,l.emit=h,l.prependListener=h,l.prependOnceListener=h,l.listeners=function(e){return[]},l.binding=function(e){throw Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw Error("process.chdir is not supported")},l.umask=function(){return 0}}},n={};function r(e){var l=n[e];if(void 0!==l)return l.exports;var s=n[e]={exports:{}},a=!0;try{t[e](s,s.exports,r),a=!1}finally{a&&delete n[e]}return s.exports}r.ab="//";var l=r(229);e.exports=l}()},7405:function(e,t,n){"use strict";n.d(t,{ZP:function(){return c}});var r=n(2265),l=n(713),s=n(4796),a=n(6272);let i=e=>(0,s.qC)(e?e(0,null):null)[0],o=Promise.resolve(),c=(0,s.xD)(l.ZP,e=>(t,n,l)=>{let c;let u=(0,r.useRef)(!1),{cache:d,initialSize:m=1,revalidateAll:f=!1,persistSize:h=!1,revalidateFirstPage:p=!0,revalidateOnMount:v=!1,parallel:x=!1}=l;try{(c=i(t))&&(c="$inf$"+c)}catch(e){}let[b,j,g]=(0,s.JN)(d,c),N=(0,r.useCallback)(()=>{let e=(0,s.o8)(b()._l)?m:b()._l;return e},[d,c,m]);(0,a.useSyncExternalStore)((0,r.useCallback)(e=>c?g(c,()=>{e()}):()=>{},[d,c]),N,N);let y=(0,r.useCallback)(()=>{let e=b()._l;return(0,s.o8)(e)?m:e},[c,m]),P=(0,r.useRef)(y());(0,s.LI)(()=>{if(!u.current){u.current=!0;return}c&&j({_l:h?P.current:y()})},[c,d]);let Z=v&&!u.current,w=e(c,async e=>{let r=b()._i,a=[],i=y(),[o]=(0,s.JN)(d,e),c=o().data,u=[],m=null;for(let e=0;e<i;++e){let[i,o]=(0,s.qC)(t(e,x?null:m));if(!i)break;let[h,v]=(0,s.JN)(d,i),b=h().data,j=f||r||(0,s.o8)(b)||p&&!e&&!(0,s.o8)(c)||Z||c&&!(0,s.o8)(c[e])&&!l.compare(c[e],b);if(n&&j){let t=async()=>{v({data:b=await n(o),_k:o}),a[e]=b};x?u.push(t):await t()}else a[e]=b;x||(m=b)}return x&&await Promise.all(u.map(e=>e())),j({_i:s.i_}),a},l),_=(0,r.useCallback)(function(e,t){let n="boolean"==typeof t?{revalidate:t}:t||{},r=!1!==n.revalidate;return c?(r&&((0,s.o8)(e)?j({_i:!0}):j({_i:!1})),arguments.length?w.mutate(e,{...n,revalidate:r}):w.mutate()):o},[c,d]),T=(0,r.useCallback)(e=>{let n;if(!c)return o;let[,r]=(0,s.JN)(d,c);if((0,s.mf)(e)?n=e(y()):"number"==typeof e&&(n=e),"number"!=typeof n)return o;r({_l:n}),P.current=n;let l=[],[a]=(0,s.JN)(d,c),i=null;for(let e=0;e<n;++e){let[n]=(0,s.qC)(t(e,i)),[r]=(0,s.JN)(d,n),o=n?r().data:s.i_;if((0,s.o8)(o))return _(a().data);l.push(o),i=o}return _(l)},[c,d,_,y]);return{size:y(),setSize:T,mutate:_,get data(){return w.data},get error(){return w.error},get isValidating(){return w.isValidating},get isLoading(){return w.isLoading}}})}}]);